<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8"></meta>
<link th:href="@{/webjars/bootstrap/4.4.1/css/bootstrap.min.css}"rel="stylesheet"></link>
<script th:src="@{/webjars/jquery/3.5.0/jquery.min.js}"></script>
<script th:src="@{/webjars/bootstrap/4.4.1/js/bootstrap.min.js}"></script>
</head>
<body>
	<div th:fragment="storeList_contents">
		<div class="page-header">
			<h1>店舗一覧</h1>
		</div>
		<table class="table table-bordered table-hover table-striped">
			<tr>
				<th class="info col-xs-2">店舗名</th>
				<th class="info col-xs-2" colspan="3">住所</th>
				<th class="info col-xs-2">店舗詳細</th>
			</tr>
			<tr th:each="store : ${storeList}">
				<td th:text="${store.storeName}"></td>
				<td colspan="3"
					th:text="${store.address1 + '&nbsp;'
								+store.address2 + '&nbsp;'
								+store.address3 + '&nbsp;'
								+store.address4}">
				</td>
				<td>
					<!-- 店舗詳細画面へのリンク -->
					<a class="btn btn-primary"
					th:href="@{'/storeDetail/' + ${store.storeId}}"> 詳細 </a>
				</td>
			</tr>
		</table>
		<!-- ページ送り用 -->
		<form action="post" th:action="@{'/storeList'}">
			<nav aria-label="...">
			  <ul class="pagination">
				<!-- 1ページ目の時は｢前へ｣ボタン無効化、2ページ目以降は表示 -->
			    <li th:if="${pagePrev} eq 0" class="page-item disabled">
			   	 <a class="page-link">前へ</a>
			   	</li>
			   	<li th:if="${pagePrev} eq 1" class="page-item">
			   	 <a class="page-link" th:href="@{'/storeList'}">前へ</a>
			   	</li>
			    <li th:if="${pagePrev} gt 1" class="page-item">
			   	 <a class="page-link" th:href="@{'/storeList/' + ${pagePrev}}">前へ</a>
			   	</li>

				<!-- StoreListControllerの配列(pageArray)に応じて変動 -->
				<!-- <li th:if="${pageCurrent} eq 1" class="page-item active">
			   	 <a class="page-link" th:href="@{'/storeList'}">1</a>
			   	</li>
				<li th:if="${pageCurrent} neq 1" class="page-item">
			   	 <a class="page-link" th:href="@{'/storeList'}">1</a>
			   	</li>
				<li th:each="pageArray, arrayStat : ${pageArray}" class="page-item active"
					th:if="${arrayStat.count} neq 1 and ${pageCurrent} eq ${arrayStat.count}">
			   	 <a class="page-link" th:text="${arrayStat.count}"
			   	 	th:href="@{'/storeList/' + ${arrayStat.count}}"></a>
			   	</li>
				<li th:each="pageArray, arrayStat : ${pageArray}" class="page-item"
					th:if="${arrayStat.count} neq 1 and ${pageCurrent} neq ${arrayStat.count}">
			   	 <a class="page-link" th:text="${arrayStat.count}"
			   	 	th:href="@{'/storeList/' + ${arrayStat.count}}"></a>
			   	</li> -->


				<!-- 現在のページよりも前のページ数を表示(例:4ページ中の3ページ目にいるなら、ページャーの｢1｣｢2｣の部分を表示) -->
				<!-- th:if = 現在のページ(例:3ページ目) < カウント数(1~2)の時だけ、｢1｣｢2｣の部分を表示 -->
			    <li th:each="pageArray, arrayStat : ${pageArray}" class="page-item"
					th:if="${pageCurrent} gt ${arrayStat.count}">
			   	 <a class="page-link" th:text="${arrayStat.count}"
			   	 	th:href="@{'/storeList/' + ${arrayStat.count}}"></a>

				<!-- 現在のページ数をだけを表示(4ページ中の3ページ目にいるなら、｢3｣の部分を表示) -->
				<li th:each="pageArray, arrayStat : ${pageArray}" class="page-item active"
					th:if="${pageCurrent} eq ${arrayStat.count}">
			   	 <a class="page-link" th:text="${arrayStat.count}"
			   	 	th:href="@{'/storeList/' + ${arrayStat.count}}"></a>

				<!-- 現在のページよりも、後のページだけを表示(4ページ中の3ページ目にいるなら、｢4｣の部分を表示) -->
			   	<li th:each="pageArray, arrayStat : ${pageArray}" class="page-item"
					th:if="${pageCurrent} lt ${arrayStat.count}">
			   	 <a class="page-link" th:text="${arrayStat.count}"
			   	 	th:href="@{'/storeList/' + ${arrayStat.count}}"></a>

				<!-- 最後のページ目より手前の時は｢次へ｣ボタン有効化、最後のページでは無効化 -->
			    <li th:unless="${pageNext} gt ${pageTotal}" class="page-item">
			      <a class="page-link" th:href="@{'/storeList/' + ${pageNext}}">次へ</a>
			    </li>
			    <li th:if="${pageNext} gt ${pageTotal}" class="page-item  disabled">
			   	 <a class="page-link">次へ</a>
			   	</li>
			  </ul>
			</nav>
		</form>
		<!-- 更新・削除処理の結果表示用 <label class="text-info" th:text="${result}">結果表示</label><br/> -->
		<div class="text-right">
			<a class="col-md-6 offset-md-2 btn-secondary btn-lg"
				type="button" href="../home">ホームへ戻る</a>
		</div>
	</div>
</body>
</html>